<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			*{margin: 0;padding: 0;}
			ul{width: 576px;height: 576px;margin-left: 360px;border: 1px solid #50B6BA;position: relative;}
			ul li{width: 190px;height: 190px;border: 1px solid #50B6BA;list-style: none;position: absolute;}
			.quantu{width: 100px;height: 100px;margin-right: 100px;float: right;background: url(img/quantu.png) no-repeat;border: 1px solid #50B6BA;}
			.footer{clear: both;text-align: center;}
		</style>
		<script src="js/moveUtil.js"></script>
	</head>

	<body>
		<ul id="bg">
			<li><img src="img/pintu0.png" /></li>
			<li><img src="img/pintu1.png" /></li>
			<li><img src="img/pintu2.png" /></li>
			<li><img src="img/pintu3.png" /></li>
			<li><img src="img/pintu4.png" /></li>
			<li><img src="img/pintu5.png" /></li>
			<li><img src="img/pintu6.png" /></li>
			<li><img src="img/pintu7.png" /></li>
		</ul>
		<div class="quantu"></div>
		<div class="footer">版权&nbsp;&copy;&nbsp;杜少小丢丢,翻版必究</div>
		
		<script>
			window.onload=function(){
				var liList=document.getElementsByTagName("li");
				var index=8;
				var arr=[];
				random();
				go();
				
				function random(){
					for(var i=0;i<liList.length;i++){
						var ran=Math.floor(Math.random()*liList.length);
						while(arr.indexOf(ran)>=0){
							ran=Math.floor(Math.random()*liList.length);
						}
						liList[i].style.left=parseInt(ran%3)*192+"px";
						liList[i].style.top=parseInt(ran/3)*192+"px";
						arr.push(ran);
					}
				}
				function move(n){
					checkWin();
					var flag=check(n);
					if(flag){
						var target={
							"left":parseInt(index%3)*192,
							"top":parseInt(index/3)*192
						}
						moveStart(liList[n],target);
						var temp=arr[n];
						arr[n]=index;
						index=temp;
					}
				}
				function check(n){
					var flag=false;
					if(arr[n]==index-1||arr[n]==index+1||arr[n]==index+3||arr[n]==index-3){
						flag=true;
						if((arr[n]==2&&index==3)||(arr[n]==3&&index==2)||(arr[n]==5&&index==6)||(arr[n]==6&&index==5))
							flag=false;
					}
					return flag;
				}
				
				function go(){
					for(var i=0;i<liList.length;i++){
						liList[i].index=i;
						liList[i].onclick=function(){
							move(this.index);
						}
					}
				}
				
				function checkWin(){
					var flag=true;
					for(var i=0;i<arr.length;i++){
						if(arr[i]!=i){
							flag=false;
						}
					}
					if(flag){
						alert("恭喜你完成拼图!");
						location.reload();
					}
				}
				
			}
		</script>
	</body>

</html>