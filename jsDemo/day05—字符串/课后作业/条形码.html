<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>条形码</title>
	</head>
	<body>
		<input type="button" value="确定" id="btn" onclick="random()"/>
		生成的13位条形码为:<input type="text" id="txt" value="" />
		
		<script>
			function random(){
				var btn=document.getElementById("btn");
				var txt=document.getElementById("txt");
				txt.value="";
				var arr=[];
				for(var i=0;i<12;i++){
					arr[i]=Math.floor(Math.random()*10);
					txt.value+=arr[i];
					console.log(arr);
				}
				txt.value+=ean13(arr);
			}
			function ean13(arr){
				var sumJi=0;
				var sumOu=0;
				for(var i=0;i<12;i++){
					if(i%2==0)
						sumOu+=arr[i];
					else	
						sumJi+=arr[i];
				console.log(sumJi+"   "+sumOu);
				}
				var gewei=(sumJi+sumOu*3)%10;
				console.log(gewei);
				var num13=10-gewei;
				if(num13==10)
					num13=0;
				return num13;
			}
		</script>
	</body>
</html>
