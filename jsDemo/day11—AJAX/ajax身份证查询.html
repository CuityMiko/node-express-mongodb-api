<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>ajax身份证查询</title>
		<style>
		</style>
	</head>
	<body>
		请输入身份证号码:(18位)<input type="text" name="txt" id="txt" value="" />
		<input type="button" name="btn" id="btn" value="查询" />
		<p id="pInfo"></p>
		<script>
			var btn=document.getElementById("btn");
			var pInfo=document.getElementById("pInfo");
			var txt=document.getElementById("txt");
			btn.onclick=function(){
				var xhr;
				if(window.XMLHttpRequest){
					xhr=new XMLHttpRequest();
				}
				else{
					xhr=new ActiveXObject("Micorsoft.XMLHTTP");
				}
				xhr.onreadystatechange=function(){
					if(xhr.readyState==4){
						if(xhr.status==200){
							var oData=JSON.parse(xhr.responseText);
							pInfo.innerHTML="省份:"+oData.result.province+"<br />";
							pInfo.innerHTML+="城市:"+oData.result.city+"<br />";
							pInfo.innerHTML+="县:"+oData.result.town+"<br />";
							pInfo.innerHTML+="性别:"+oData.result.sex+"<br />";
							pInfo.innerHTML+="出生年月:"+oData.result.birth+"<br />";
						}
					}
				}
				if(txt.value.length!=18){
					alert("身份证不正确!");
				}
				else{
					xhr.open("GET","http://apis.baidu.com/netpopo/idcard/query1?idcard="+txt.value,true);
					xhr.setRequestHeader("apikey","45d8173dfc35ce17924e1141a441258e"),
					xhr.send();
				}
			}
		</script>
		
	</body>
</html>
