<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>ajax电话号码归属地查询</title>
		<style>
		</style>
	</head>
	<body>
		请输入手机号码:(11位)<input type="text" name="txt" id="txt" value="" />
		<input type="button" name="btn" id="btn" value="查询" />(查询要收费)
		<p id="pInfo"></p>
		
		<script>
			var txt=document.getElementById("txt");
			var btn=document.getElementById("btn");
			var pInfo=document.getElementById("pInfo");
			
			btn.onclick=function(){
				var xhr;
				if(window.XMLHttpRequest){
					xhr=new XMLHttpRequest();
				}
				else{
					xhr=new ActiveXObject("Micorsoft.XMLHTTP");
				}
				xhr.onreadystatechange=function(){
					if(xhr.readyState==4){
						if(xhr.status==200){
							var oData=JSON.parse(xhr.responseText);
							pInfo.innerHTML="省份:"+oData.result.province+"<br />";
							pInfo.innerHTML+="城市:"+oData.result.city+"<br />";
							pInfo.innerHTML+="运营商:"+oData.result.company+"<br />";
							pInfo.innerHTML+="卡类型:"+oData.result.cardtype+"<br />";
						}
					}
				}
				if(txt.value.length!=11){
					alert("您输入的电话号码 不正确!");
				}
				else{
					xhr.open("get","http://apis.baidu.com/netpopo/shouji/query?shouji="+txt.value,true);
					xhr.setRequestHeader("apikey","45d8173dfc35ce17924e1141a441258e");
					xhr.send();
				}
			}
			
		</script>
		
	</body>
</html>
