<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>勾股定理排列</title>
		<style>
				*{margin: 0;padding: 0;}
			div{width: 5px;height: 5px;position: absolute;}
		</style>
	</head>
	<body>
		<script>
			var timer;
			randomDiv(360);
			document.onmousedown=function(){
				clearInterval(timer);
				sortDiv();
			}
			
			function randomDiv(n){
				var fragment=document.createDocumentFragment();
				for(var i=0;i<n;i++){
					var divNew=document.createElement("div");
					divNew.style.top=Math.floor(Math.random()*900)+"px";
					divNew.style.left=Math.floor(Math.random()*1200)+"px";
					divNew.style.background="rgb("+Math.floor(Math.random()*255)+","+Math.floor(Math.random()*255)+","+Math.floor(Math.random()*255)+")";
					fragment.appendChild(divNew);
				}
				document.body.appendChild(fragment);
			}
			
			function sortDiv(){
				var divList=document.getElementsByTagName("div");
				timer=setInterval(function(){
					for(var i=0;i<divList.length/2;i++){
						if(divList[i].offsetTop<i*5){
							divList[i].style.top=divList[i].offsetTop+1+"px";
						}
						else if(divList[i].offsetTop>i*5){
							divList[i].style.top=divList[i].offsetTop-1+"px";
						}
						if(divList[i].offsetLeft<i*7){
							divList[i].style.left=divList[i].offsetLeft+1+"px";
						}
						else if(divList[i].offsetLeft>i*7){
							divList[i].style.left=divList[i].offsetLeft-1+"px";
						}
					}
					for(var j=divList.length/2;j<divList.length;j++){
						if(divList[j].offsetTop<(900-(j-divList.length/2)*5)){
							divList[j].style.top=divList[j].offsetTop+1+"px";
						}
						else if(divList[j].offsetTop>(900-(j-divList.length/2)*5)){
							divList[j].style.top=divList[j].offsetTop-1+"px";
						}
						if(divList[j].offsetLeft<(j-divList.length/2)*7){
							divList[j].style.left=divList[j].offsetLeft+1+"px";
						}
						else if(divList[j].offsetLeft>(j-divList.length/2)*7){
							divList[j].style.left=divList[j].offsetLeft-1+"px";
						}
					}
				},3);
			}
			
		</script>
	</body>
</html>
